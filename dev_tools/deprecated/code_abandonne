function anim_transi_horizontal(l_pas,longueur,sens,champ,debut)
    local pas=string.rep(" ",l_pas)
    local deb,fin,parcours
    if sens == "extension" then
        deb,fin,parcours=debut or 0,longueur,1
    else
        deb,fin,parcours=longueur,debut or 0,-1
    end
    for i=deb,fin,parcours do
        local s=string.rep(pas,i)
        wesnoth.delay(1)
        wesnoth.set_dialog_value(s,champ)
        wesnoth.set_dialog_visible("hidden",champ)
        wesnoth.set_dialog_visible(true,champ)
    end
    wesnoth.set_dialog_visible(false,champ)
end
function anim_transi_vertical(l_pas,longueur,sens,champ)
    local deb,fin,parcours
    if sens == "extension" then
        deb,fin,parcours=1,longueur,1
    else
        deb,fin,parcours=longueur,1,-1
    end
    for i=deb,fin,parcours do
        wesnoth.set_dialog_value("objets/blankmini.png~SCALE(0,"..i*l_pas..")",champ)
        wesnoth.set_dialog_visible("hidden",champ)
        wesnoth.set_dialog_visible(true,champ)
       wesnoth.delay(10)
    end
    wesnoth.set_dialog_visible(false,champ)
end


#deprecated    

#define AMLA_SWORD_MARKSMAN
    [advancement]
        id=sword_marksman
        always_display= true
        max_times=1
        require_amla=bow_swordatk1
        description=_"More precise with swords : 60% chance to hit."
        image ="attacks/sword_marksman.png"
        [effect]
            apply_to = attack
            name= sword
            set_icon="attacks/sword_marksman.png"
            [set_specials]
                mode=append
                {WEAPON_SPECIAL_MARKSMAN}
            [/set_specials]
        [/effect]
        {STANDARD_AMLA_HEAL 10%}
    [/advancement]
#enddef

#define PRECIS CAT ID_CAT

    description=_"More precise with " + {CAT} + " : 70% chance to hit."
    image ="icons/"+{ID_CAT}+"_precis.png"
    [effect]
        apply_to = attack
        name= {ID_CAT}
        [set_specials]
            mode=append
            {WEAPON_SPECIAL_PRECIS}
        [/set_specials]
    [/effect]
    [effect]
        apply_to = attack
        name= {ID_CAT}
        remove_specials= marksman
    [/effect]

#enddef

#define FOCUS CAT ID_CAT
    description=_"Deadly accurate with " + {CAT} + " : 80% chance to hit."
    image ="icons/"+{ID_CAT}+"_focus.png"
    [effect]
        apply_to = attack
        name= {ID_CAT}
        [set_specials]
            mode=append
            {WEAPON_SPECIAL_FOCUS}
        [/set_specials]
    [/effect]
    [effect]
        apply_to = attack
        name= {ID_CAT}
        remove_specials= marksman,precis
    [/effect]
#enddef

#define AMLA_LEECHES

    [advancement]
        always_display= true
        strict_amla=yes
        max_times=1
        id=amla_leeches
        description= _" Able to leeches enemies, even undead. Melee weapon special : leeches"
        image="items/cloak-green.png"
        [effect]
            apply_to=attack
            range=melee
            [set_specials]
                mode=append
                {WEAPON_SPECIAL_LEECHES}
            [/set_specials]
        [/effect]

        {STANDARD_AMLA_HEAL 10%}
    [/advancement]

#enddef

#define AMLA_BERSERK

    [advancement]
        always_display= true
        strict_amla=yes
        max_times=1
        id=amla_berserk
        description= _" Fury of arrows. Ranged weapon special : berserk"
        image="items/cloak-green.png"
        [effect]
            apply_to=attack
            range=ranged
            [set_specials]
                mode=append
                {WEAPON_SPECIAL_BERSERK}
            [/set_specials]
        [/effect]
        {STANDARD_AMLA_HEAL 15%}
    [/advancement]

#enddef
